## loop-0382 red | helper:diff-snapshot=0 files changed
- command: |
    python3 - <<'PY'
    from pathlib import Path
    text = Path('Makefile').read_text()
    if '_tests/test_request_gating_macros.py' in text:
        raise SystemExit(0)
    print('ci-guardrails missing request gating macros test')
    raise SystemExit(1)
    PY
- exit_status: 1
- output: |
    ci-guardrails missing request gating macros test

## loop-0382 green | helper:diff-snapshot=1 file changed, 1 insertion(+), 1 deletion(-)
- command: *(same as above)*
- exit_status: 0
- output: |
    ci-guardrails includes request gating macros test

## loop-0382 removal | helper:diff-snapshot=0 files changed
- command: `git checkout -- Makefile && python3 - <<'PY' ...`
- exit_status: 1
- output: |
    ci-guardrails missing request gating macros test
