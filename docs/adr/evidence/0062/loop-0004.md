# loop-0004 history drawer guidance

## loop-0004 red | helper:rerun python3 -m pytest _tests/test_request_history_drawer_gating.py
- 2025-12-24T20:36:08Z | exit 1
- helper:diff-snapshot=0 files changed
- failure: history drawer still patches local gating helpers; surface guard missing | inline

```
E       AssertionError: False is not true
```

## loop-0004 green | helper:rerun python3 -m pytest _tests/test_request_history_drawer_gating.py
- 2025-12-24T20:44:15Z | exit 0
- helper:diff-snapshot=2 files changed, 67 insertions(+), 74 deletions(-)
- behaviour: history drawer delegates to `guard_surface_request`; shared tests pass | inline

```
_tests/test_request_history_drawer_gating.py ...                         [100%]
```

## loop-0004 removal | helper:rerun git stash push -- lib/requestHistoryDrawer.py && python3 -m pytest _tests/test_request_history_drawer_gating.py && git stash pop
- 2025-12-24T20:39:52Z | exit 1
- helper:diff-snapshot=0 files changed
- failure: legacy module lacks `guard_surface_request` attribute | inline

```
E       AttributeError: <module 'talon_user.lib.requestHistoryDrawer' ...> does not have the attribute 'guard_surface_request'
```
