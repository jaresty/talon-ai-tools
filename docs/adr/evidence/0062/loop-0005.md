# loop-0005 history actions guidance

## loop-0005 red | helper:rerun python3 -m pytest _tests/test_request_history_actions.py
- 2025-12-24T20:49:03Z | exit 1
- helper:diff-snapshot=0 files changed
- failure: tests expect shared surface guard but history actions still patch local gating helpers | inline

```
E       AttributeError: <module 'talon_user.lib.requestHistoryActions' ...> does not have the attribute 'guard_surface_request'
```

## loop-0005 green | helper:rerun python3 -m pytest _tests/test_request_history_actions.py
- 2025-12-24T20:56:22Z | exit 0
- helper:diff-snapshot=2 files changed, 33 insertions(+), 90 deletions(-)
- behaviour: request history actions delegate to `guard_surface_request`; gating sequences pass | inline

```
_tests/test_request_history_actions.py ................................. [ 38%]
....................................................                     [100%]
```

## loop-0005 removal | helper:rerun git stash push -- lib/requestHistoryActions.py && python3 -m pytest _tests/test_request_history_actions.py && git stash pop
- 2025-12-24T20:52:48Z | exit 1
- helper:diff-snapshot=0 files changed
- failure: legacy module lacks `guard_surface_request` attribute | inline

```
E       AttributeError: <module 'talon_user.lib.requestHistoryActions' ...> does not have the attribute 'guard_surface_request'
```
