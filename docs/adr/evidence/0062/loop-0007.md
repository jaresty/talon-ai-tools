# loop-0007 migrate history surfaces to lifecycle

## loop-0007 red | helper:rerun python3 -m pytest _tests/test_history_query.py _tests/test_request_history_actions.py
- 2025-12-25T01:33:12Z | exit 1
- helper:diff-snapshot=0 files changed
- failure: history actions/query tests expect lifecycle delegation but helpers still use local filters | inline

```
FAILED _tests/test_history_query.py::HistoryQueryTests::test_history_axes_for_delegates_to_lifecycle_helper
FAILED _tests/test_request_history_actions.py::RequestHistoryActionTests::test_history_axes_for_delegates_to_lifecycle
```

## loop-0007 green | helper:rerun python3 -m pytest _tests/test_history_lifecycle.py _tests/test_history_query.py _tests/test_request_history_actions.py _tests/test_request_history_drawer_gating.py
- 2025-12-25T01:38:39Z | exit 0
- helper:diff-snapshot=4 files changed, 82 insertions(+), 24 deletions(-)
- behaviour: history actions/query now delegate axes normalisation to `historyLifecycle`, drawer tests remain green, lifecycle characterization passes | inline

```
_tests/test_history_lifecycle.py ..
_tests/test_history_query.py ...............
_tests/test_request_history_actions.py .................................
_tests/test_request_history_drawer_gating.py ...
```

## loop-0007 removal | helper:rerun git stash push -- lib/historyQuery.py lib/requestHistoryActions.py && python3 -m pytest _tests/test_history_query.py _tests/test_request_history_actions.py && git stash pop
- 2025-12-25T01:40:02Z | exit 1
- helper:diff-snapshot=0 files changed
- failure: lifecycle helpers removed, tests fall back to legacy filters | inline

```
FAILED _tests/test_history_query.py::HistoryQueryTests::test_history_axes_for_delegates_to_lifecycle_helper
FAILED _tests/test_request_history_actions.py::RequestHistoryActionTests::test_history_axes_for_delegates_to_lifecycle
```
