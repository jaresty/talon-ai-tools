# loop-0025 reuse metadata snapshot for help hub cheat sheet

- helper_version: helper:v20251223.1
- focus: ADR-0062 §Refactor Plan – Guidance Surface Coordinator (reuse persona/intent metadata for Help Hub cheat sheet copy/export)
- riskiest_assumption: Help Hub cheat sheet and clipboard exports would keep emitting stale persona/intent casing unless the shared metadata snapshot fed those flows; `python3 -m pytest _tests/test_help_hub.py` previously missed the orchestrator overrides (probability medium, impact medium-high on Concordance visibility).
- validation_targets:
  - python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py
- evidence:
  - red | 2025-12-25T18:18:00Z | exit 1 | python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py
    - helper:diff-snapshot=4 files changed, 422 insertions(+), 20 deletions(-)
    - pointer: inline — `E       assert 'Mentor' in cheat_text`
  - green | 2025-12-25T18:28:05Z | exit 0 | python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py
    - helper:diff-snapshot=4 files changed, 422 insertions(+), 20 deletions(-)
    - pointer: inline — `47 passed`
  - removal | 2025-12-25T18:27:30Z | exit 1 | git stash push -- lib/helpHub.py lib/helpDomain.py && python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py && git stash pop
    - helper:diff-snapshot=0 files changed
    - pointer: inline — `ImportError: cannot import name 'HelpMetadataSnapshot' from 'lib.helpDomain'`
- rollback_plan: git restore --source=HEAD -- lib/helpDomain.py lib/helpHub.py _tests/test_help_domain.py _tests/test_help_hub.py && python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py
- delta_summary: helper:diff-snapshot=4 files changed, 422 insertions(+), 20 deletions(-); adds metadata snapshot helper in `helpDomain`, refactors `helpHub` cheat sheet to consume it, and extends help hub/domain tests to cover the canonical metadata.
- residual_risks:
  - Help Hub ADR/clipboard exports outside the cheat sheet still build ad-hoc metadata; mitigation: migrate export helpers to the metadata snapshot; monitoring: guardrails covering copy/export flows.
- next_work:
  - Behaviour: migrate Help Hub ADR link/clipboard exports to metadata snapshot — python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py — future-shaping: keep documentation exports aligned with canonical persona/intent metadata.
