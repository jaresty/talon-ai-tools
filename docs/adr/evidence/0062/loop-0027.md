# loop-0027 expose structured metadata JSON export in help hub

- helper_version: helper:v20251223.1
- focus: ADR-0062 §Refactor Plan – Guidance Surface Coordinator (JSON metadata export)
- riskiest_assumption: Without a structured export, automation consumers would keep scraping text summaries; `python3 -m pytest _tests/test_help_hub.py::test_copy_metadata_snapshot_json -q` stayed red when the JSON copy helper was missing (probability medium, impact medium on Concordance automation).
- validation_targets:
  - python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py
- evidence:
  - red | 2025-12-25T18:59:47Z | exit 1 | python3 -m pytest _tests/test_help_hub.py::test_copy_metadata_snapshot_json -q
    - helper:diff-snapshot=0 files changed
    - pointer: inline — `AttributeError: module 'lib.helpHub' has no attribute '_copy_metadata_snapshot_json'`
  - green | 2025-12-25T19:01:35Z | exit 0 | python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py
    - helper:diff-snapshot=2 files changed, 126 insertions(+), 22 deletions(-)
    - pointer: inline — `49 passed`
  - removal | 2025-12-25T19:01:05Z | exit 1 | git stash push -- lib/helpHub.py && python3 -m pytest _tests/test_help_hub.py::test_copy_metadata_snapshot_json -q && git stash pop
    - helper:diff-snapshot=0 files changed
    - pointer: inline — `AttributeError: module 'lib.helpHub' has no attribute '_copy_metadata_snapshot_json'`
- rollback_plan: git restore --source=HEAD -- lib/helpHub.py _tests/test_help_hub.py && python3 -m pytest _tests/test_help_hub.py _tests/test_help_domain.py _tests/test_help_hub_guard.py
- delta_summary: helper:diff-snapshot=2 files changed, 126 insertions(+), 22 deletions(-); introduces `_metadata_snapshot_records()` and `_metadata_snapshot_json()` helpers, adds a Help Hub button/action to copy JSON metadata, and extends guardrails with a JSON-specific test.
- residual_risks:
  - JSON payload currently surfaces static fields; future loops may add versioning and provenance metadata to support downstream schema evolution.
- next_work:
  - Behaviour: version the metadata JSON schema and surface provenance fields — python3 -m pytest _tests/test_help_hub.py — future-shaping: keep automation consumers aligned with schema evolution.
