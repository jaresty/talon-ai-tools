- helper_version: helper:v20251223.1
- focus: ADR-0062 §Refactor Plan – History Lifecycle Orchestrator (drawer refresh façade)
- riskiest_assumption: Request history drawers still relied on bespoke refresh logic; without a façade-aligned helper the new guard characterization test fails (probability medium, impact medium-high on lifecycle adoption).
- validation_targets:
  - python3 -m pytest _tests/test_request_history_drawer_gating.py::RequestHistoryDrawerGatingTests::test_guard_surface_delegate_is_used
- evidence:
  - red | 2025-12-25T22:56:30Z | exit 1 | python3 -m pytest _tests/test_request_history_drawer_gating.py::RequestHistoryDrawerGatingTests::test_guard_surface_delegate_is_used
    - helper:diff-snapshot=1 file changed, 29 insertions(+)
    - pointer: inline — `AttributeError: module 'talon_user.lib.requestHistoryDrawer' has no attribute 'refresh_history_drawer'`
  - red | 2025-12-25T22:57:10Z | exit 1 | python3 -m pytest _tests/test_request_history_drawer_gating.py::RequestHistoryDrawerGatingTests::test_guard_surface_delegate_is_used
    - helper:diff-snapshot=1 file changed, 29 insertions(+)
    - pointer: inline — `AssertionError: expected call not found. Expected: guard_surface_request(surface='history_drawer', source='requestHistoryDrawer')`
  - green | 2025-12-25T22:58:05Z | exit 0 | python3 -m pytest _tests/test_request_history_drawer_gating.py::RequestHistoryDrawerGatingTests::test_guard_surface_delegate_is_used
    - helper:diff-snapshot=1 file changed, 29 insertions(+)
    - pointer: inline — `1 passed`
- rollback_plan: git restore --source=HEAD -- lib/requestHistoryDrawer.py && python3 -m pytest _tests/test_request_history_drawer_gating.py::RequestHistoryDrawerGatingTests::test_guard_surface_delegate_is_used
- delta_summary: helper:diff-snapshot=1 file changed, 29 insertions(+); adds `refresh_history_drawer()` that delegates gating to `guard_surface_request`, refreshes entries, and nudges the active canvas when the drawer is visible.
- residual_risks:
  - Canvas refresh currently best-effort via freeze/resume/show sequencing; monitor for additional redraw helpers during lifecycle façade integration.
- next_work:
  - Behaviour: continue lifecycle façade adoption for history actions/log exports — python3 -m pytest _tests/test_request_history_actions.py _tests/test_history_lifecycle.py — future-shaping: align remaining history modules with shared helpers.
