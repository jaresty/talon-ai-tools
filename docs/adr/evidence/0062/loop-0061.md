- helper_version: helper:v20251223.1
- focus: ADR-0062 §Refactor Plan – History Lifecycle Orchestrator (migrate surface gating to façade)
- riskiest_assumption: Overlay/canvas surfaces still imported `try_begin_request` from `requestGating`, risking divergence once gating behaviour changes (probability medium, impact medium on UX consistency).
- validation_targets:
  - python3 -m pytest _tests/test_surface_guidance.py
  - python3 -m pytest _tests/test_prompt_pattern_gui.py _tests/test_prompt_pattern_gui_guard.py
  - python3 -m pytest _tests/test_model_suggestion_gui.py _tests/test_model_suggestion_gui_guard.py
  - python3 -m pytest _tests/test_help_hub.py
  - python3 -m pytest _tests/test_model_confirmation_gui.py _tests/test_model_confirmation_gui_guard.py
  - python3 -m pytest _tests/test_model_helpers_response_canvas.py
  - python3 -m pytest _tests/test_provider_commands.py
- evidence:
  - green | 2025-12-26T01:14:02Z | exit 0 | python3 -m pytest _tests/test_surface_guidance.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `4 passed`
  - green | 2025-12-26T01:15:11Z | exit 0 | python3 -m pytest _tests/test_prompt_pattern_gui.py _tests/test_prompt_pattern_gui_guard.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `9 passed`
  - red | 2025-12-26T01:16:05Z | exit 1 | python3 -m pytest _tests/test_model_suggestion_gui.py _tests/test_model_suggestion_gui_guard.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `AttributeError: module ... has no attribute 'set_drop_reason'`
  - green | 2025-12-26T01:18:12Z | exit 0 | python3 -m pytest _tests/test_model_suggestion_gui.py _tests/test_model_suggestion_gui_guard.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `32 passed`
  - green | 2025-12-26T01:20:18Z | exit 0 | python3 -m pytest _tests/test_help_hub.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `35 passed`
  - green | 2025-12-26T01:20:50Z | exit 0 | python3 -m pytest _tests/test_model_confirmation_gui.py _tests/test_model_confirmation_gui_guard.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `13 passed`
  - green | 2025-12-26T01:21:10Z | exit 0 | python3 -m pytest _tests/test_model_helpers_response_canvas.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `6 passed`
  - green | 2025-12-26T01:21:32Z | exit 0 | python3 -m pytest _tests/test_provider_commands.py
    - helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-)
    - pointer: inline — `4 passed`
- rollback_plan: git restore --source=HEAD -- lib/surfaceGuidance.py lib/modelConfirmationGUI.py lib/modelHelpCanvas.py lib/modelPatternGUI.py lib/modelPromptPatternGUI.py lib/modelResponseCanvas.py lib/modelSuggestionGUI.py lib/providerCommands.py lib/helpHub.py lib/historyLifecycle.py && python3 -m pytest _tests/test_surface_guidance.py
- delta_summary: helper:diff-snapshot=10 files changed, 62 insertions(+), 21 deletions(-); lifecycle façade now exposes `try_begin_request`, and overlay/canvas surfaces import gating helpers via the façade while preserving guard-based behaviour.
- residual_risks:
  - `requestHistoryDrawer` still calls `try_begin_request` directly to customise drop messaging; revisit once façade supplies equivalent helper.
- next_work:
  - Behaviour: continue migrating remaining request orchestrators (e.g., history drawer nuances) — python3 -m pytest _tests/test_request_history_drawer.py — future-shaping: remove final direct `requestGating` dependencies.
