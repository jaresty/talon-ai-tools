- helper_version: helper:v20251223.1
- focus: ADR-0062 §Refactor Plan – History Lifecycle Orchestrator (History drawer gating canonicalization)
- riskiest_assumption: History drawer would keep bespoke gating logic and stale drop messaging instead of surfaceGuidance delegation, risking Concordance drift (probability high, impact medium-high on telemetry and UI consistency).
- validation_targets:
  - python3 -m pytest _tests/test_request_history_drawer.py
- evidence:
  - red | 2025-12-27T02:48:00Z | exit 1 | python3 -m pytest _tests/test_request_history_drawer.py
    - helper:diff-snapshot=1 file changed, 77 insertions(+), 62 deletions(-)
    - pointer: inline — new guard delegation tests fail because requestHistoryDrawer lacks guard_surface_request integration.
  - green | 2025-12-27T02:50:00Z | exit 0 | python3 -m pytest _tests/test_request_history_drawer.py
    - helper:diff-snapshot=2 files changed, 96 insertions(+), 100 deletions(-)
    - pointer: inline — guard suite passes, verifying on_block fallback updates last_message and records drop reasons.
  - removal | 2025-12-27T02:50:40Z | exit 1 | git stash push --keep-index --message loop-0106-removal && python3 -m pytest _tests/test_request_history_drawer.py
    - helper:diff-snapshot=1 file changed, 77 insertions(+), 62 deletions(-)
    - pointer: inline — reverting code while keeping tests reproduces AttributeError: guard_surface_request missing.
- rollback_plan: git stash push --keep-index --message loop-0106-removal && python3 -m pytest _tests/test_request_history_drawer.py && git stash pop && git reset _tests/test_request_history_drawer.py
- delta_summary: helper:diff-snapshot=2 files changed, 96 insertions(+), 100 deletions(-); history drawer now delegates gating to surfaceGuidance with fallback messaging recorded via on_block handler.
- residual_risks:
  - Request log module still exposes bespoke gating helpers; mitigate by examining requestLog ingestion and queuing an additional loop if duplication persists; monitor via `_tests/test_request_log.py`.
- next_work:
  - Behaviour: audit request log gating for surfaceGuidance adoption — python3 -m pytest _tests/test_request_log.py — future-shaping: ensure history exports share canonical gating hooks.
