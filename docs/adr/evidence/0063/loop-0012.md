- helper_version: helper:v20251223.1
- focus: ADR-0063 §Talon Adapter Layer (add bar CLI delegation stub)
- riskiest_assumption: Without a callable stub, the feature flag cannot be exercised and future adapter work lacks an entry point (probability medium, impact medium-high on rollout planning).
- validation_targets:
  - python3 - <<'PY'
      from pathlib import Path
      text = Path('lib/providerCommands.py').read_text()
      if '_delegate_to_bar_cli' not in text:
          raise SystemExit('bar CLI delegation stub missing in providerCommands')
      print('bar CLI delegation stub present after edit')
    PY
- evidence:
  - red | 2026-01-01T17:27:15Z | exit 1 | python3 - <<'PY'
      from pathlib import Path
      text = Path('lib/providerCommands.py').read_text()
      if '_delegate_to_bar_cli' not in text:
          raise SystemExit('bar CLI delegation stub missing in providerCommands')
      print('bar CLI delegation stub present after edit')
    PY
    - helper:diff-snapshot=0 files changed
    - pointer: inline — command exits because the stub was absent.
  - green | 2026-01-01T17:27:44Z | exit 0 | python3 - <<'PY'
      from pathlib import Path
      text = Path('lib/providerCommands.py').read_text()
      if '_delegate_to_bar_cli' not in text:
          raise SystemExit('bar CLI delegation stub missing after edit')
      print('bar CLI delegation stub present after edit')
    PY
    - helper:diff-snapshot=1 file changed, 12 insertions(+)
    - pointer: inline — stub now exists and command prints confirmation.
  - removal | 2026-01-01T17:28:05Z | exit 1 | python3 - <<'PY'
      from pathlib import Path
      text = Path('lib/providerCommands.py').read_text()
      if '_delegate_to_bar_cli' not in text:
          raise SystemExit('bar CLI delegation stub missing (expected removal)')
      print('bar CLI delegation stub present')
    PY
    - helper:diff-snapshot=0 files changed
    - pointer: inline — reverting the file removes the stub and the guard fails again.
- rollback_plan: git checkout HEAD -- lib/providerCommands.py
- delta_summary: helper:diff-snapshot=1 file changed, 12 insertions(+); added `_delegate_to_bar_cli` stub guarded by `user.bar_cli_enabled` for future delegation.
- loops_remaining_forecast: 0 loops remaining for initial adapter enablement; confidence medium.
- residual_risks:
  - Stub currently does not invoke the CLI; follow-up work must wire actual subprocess handling and telemetry mapping.
- next_work:
  - Behaviour: integrate bar CLI adapter once delegation plan is ready — python3 -m pytest _tests/test_gpt_actions.py — future-shaping: exercise the CLI path end-to-end.
