# loop-0019 surface bootstrap installer failures

## metadata
- helper_version: helper:v20251223.1
- focus: Implementation Guardrails → Delivery posture — Salient task "Replace stubbed CLI delegation with real binary" (validation: `python3 - <<'PY'\nimport pathlib, sys, io\nfrom contextlib import redirect_stderr\nmanifest = pathlib.Path('artifacts/cli/bar-darwin-arm64.tar.gz.sha256')\nbackup = manifest.read_bytes()\nmanifest.unlink()\nimport bootstrap\nbuf = io.StringIO()\nwith redirect_stderr(buf):\n    bootstrap.bootstrap()\nmanifest.write_bytes(backup)\nprint(buf.getvalue())\nPY`).
- riskiest_assumption: Without emitting warnings when installer falls back to `go build`, bootstrap failures stay silent and Talon operators cannot tell why packaged delegation was skipped.
- validation_targets:
  - `python3 - <<'PY'\nimport pathlib, sys, io\nfrom contextlib import redirect_stderr\nmanifest = pathlib.Path('artifacts/cli/bar-darwin-arm64.tar.gz.sha256')\nbackup = manifest.read_bytes()\nmanifest.unlink()\nimport bootstrap\nbuf = io.StringIO()\nwith redirect_stderr(buf):\n    bootstrap.bootstrap()\nmanifest.write_bytes(backup)\nprint(buf.getvalue())\nPY`
- rollback_plan: `git restore --source=HEAD bootstrap.py && python3 scripts/tools/install_bar_cli.py --quiet`
- delta_summary: helper:diff-snapshot=3 files changed, 94 insertions(+), 3 deletions(-) — log bootstrap installer failures and document evidence
- loops_remaining_forecast:
  - 1 loop — Route bootstrap warning telemetry through Talon adapters (`python3 -m pytest _tests/test_cli_talon_parity.py`), confidence medium.
  - 2 loops — Publish signed CLI artefacts with CI enforcement (`scripts/tools/check_cli_assets.py`), confidence medium.
- residual_risks:
  - Warning telemetry not yet surfaced beyond stderr (severity medium). Mitigation: integrate adapter warning pipeline next loop; monitor parity harness output for missing installer artefacts.
- next_work:
  - Behaviour: Replace stubbed CLI delegation with real binary — ensure Talon adapters raise installer warnings via `python3 -m pytest _tests/test_cli_talon_parity.py`.
  - Behaviour: Release checksum manifest hardening — add signature validation to `scripts/tools/check_cli_assets.py`.

## loop-0019 red | helper:rerun python3 - <<'PY'
import pathlib, sys, io
from contextlib import redirect_stderr
manifest = pathlib.Path('artifacts/cli/bar-darwin-arm64.tar.gz.sha256')
backup = manifest.read_bytes()
manifest.unlink()
import bootstrap
buf = io.StringIO()
with redirect_stderr(buf):
    bootstrap.bootstrap()
manifest.write_bytes(backup)
print(buf.getvalue())
PY
- 2026-01-02T21:22:43Z | exit 0
- helper:diff-snapshot=0 files changed
- failure: bootstrap installer fallback was silent | inline

```
stderr-output: ''
```

## loop-0019 green | helper:rerun python3 - <<'PY'
import pathlib, sys, io
from contextlib import redirect_stderr
manifest = pathlib.Path('artifacts/cli/bar-darwin-arm64.tar.gz.sha256')
backup = manifest.read_bytes()
manifest.unlink()
import bootstrap
buf = io.StringIO()
with redirect_stderr(buf):
    bootstrap.bootstrap()
manifest.write_bytes(backup)
print(buf.getvalue())
PY
- 2026-01-02T21:27:26Z | exit 0
- helper:diff-snapshot=3 files changed, 94 insertions(+), 3 deletions(-)
- bootstrap logs installer failure and fallback path | inline

```
stderr-output: 'bootstrap: install failed; falling back to go build (missing CLI manifest: /Users/tkma6d4/.talon/user/talon-ai-tools/artifacts/cli/bar-darwin-arm64.tar.gz.sha256)
'
```

## loop-0019 removal | helper:rerun python3 - <<'PY'
import pathlib, sys, io
from contextlib import redirect_stderr
manifest = pathlib.Path('artifacts/cli/bar-darwin-arm64.tar.gz.sha256')
backup = manifest.read_bytes()
manifest.unlink()
import bootstrap
buf = io.StringIO()
with redirect_stderr(buf):
    bootstrap.bootstrap()
manifest.write_bytes(backup)
print(buf.getvalue())
PY
- 2026-01-02T21:28:11Z | exit 0
- helper:diff-snapshot=0 files changed
- failure returns once bootstrap warning hook removed | inline

```
stderr-output: ''
```
