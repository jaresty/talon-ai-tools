# loop-0025 disable delegation when bootstrap telemetry redlines

## metadata
- helper_version: helper:v20251223.1
- focus: Implementation Guardrails → Delivery posture — Salient task "Replace stubbed CLI delegation with real binary" (validation: `python3 -m pytest _tests/test_cli_talon_parity.py`).
- riskiest_assumption: Without wiring bootstrap telemetry into delegation state, Talon adapters would continue delegating to a missing CLI binary, hiding delivery drift.
- validation_targets:
  - `python3 -m pytest _tests/test_cli_talon_parity.py`
- rollback_plan: `git restore --source=HEAD bootstrap.py _tests/test_cli_talon_parity.py lib/bootstrapTelemetry.py lib/cliDelegation.py docs/adr/0063-go-cli-single-source-of-truth.work-log.md docs/adr/evidence/0063/loop-0025.md`
- delta_summary: helper:diff-snapshot=6 files changed, 200 insertions(+), 1 deletion(-)
- loops_remaining_forecast:
  - 1 loop — Integrate delegation disablement with adapter health probes and fallback thresholds (`python3 -m pytest _tests/test_cli_talon_parity.py`), confidence medium.
  - 2 loops — Persist bootstrap telemetry state between sessions and surface in adapter UI (`python3 -m pytest _tests/test_cli_talon_parity.py`), confidence medium.
- residual_risks:
  - Delegation disablement resets on process restart; operators must re-run bootstrap to rediscover warnings (severity medium). Mitigation: persist warning telemetry across restarts; monitor parity tests for regressions.
- next_work:
  - Behaviour: Replace stubbed CLI delegation with real binary — bind adapter health probes to the delegation state so repeated failures trip automatic fallback (`python3 -m pytest _tests/test_cli_talon_parity.py`).
  - Behaviour: Release checksum manifest hardening — reuse telemetry state in CI to block releases when packaged artefacts go missing (`scripts/tools/check_cli_assets.py`).

## loop-0025 red | helper:rerun python3 -m pytest _tests/test_cli_talon_parity.py
- 2026-01-02T23:55:33Z | exit 1
- helper:diff-snapshot=0 files changed
- failure: cliDelegation module absent so parity harness cannot import adapter telemetry helpers | inline

```
E   ModuleNotFoundError: No module named 'lib.cliDelegation'
```

## loop-0025 green | helper:rerun python3 -m pytest _tests/test_cli_talon_parity.py
- 2026-01-02T23:58:41Z | exit 0
- helper:diff-snapshot=6 files changed, 200 insertions(+), 1 deletion(-)
- success: parity harness captures telemetry, disables delegation on warnings, and restores state after reinstall | inline

```
_tests/test_cli_talon_parity.py ....                                     [100%]
```

## loop-0025 removal | helper:rerun python3 -m pytest _tests/test_cli_talon_parity.py
- 2026-01-02T23:58:21Z | exit 1
- helper:diff-snapshot=0 files changed
- failure returns when cliDelegation helpers are removed, restoring ModuleNotFoundError | inline

```
E   ModuleNotFoundError: No module named 'lib.cliDelegation'
```
